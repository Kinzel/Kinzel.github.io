---
title: Teste 5
author: Guilherme Kinzel
date: '2021-03-22'
slug: []
categories: []
tags: []
Description: ''
Tags: []
Categories: []
DisableComments: no
---



<p><em>J√° se imaginou dentro de um supermercado de FIIs?</em></p>
<p>P√°gina ainda em constru√ß√£o. Ainda n√£o divulgada. üößüë∑üõ†üöß</p>
<center>
<img src="/images/supermarket.jpg" width="250" />
</center>
<style type="text/css">

body, td {
   font-size: 14px;
}
code.r{
  font-size: 20px;
}
pre {
  font-size: 13px
}
</style>
<p>Passeando pelos corredores do setor de Log√≠stica, h√° nas prataleiras:</p>
<ul>
<li><strong>FII A</strong> com 5,0% <em>Dividend Yield</em> e 20% do caixa dispon√≠vel e;</li>
<li><strong>FII B</strong> com 6,0% <em>Dividend Yield</em> e 1% do caixa dispon√≠vel.</li>
</ul>
<p>Perceba que ao analisar a embalagem voc√™ facilmente pode mudar de opini√£o de qual produto levar para casa.</p>
<p>Aqui neste post do blog <em>I‚Äôm GK!</em> eu ajudarei voc√™ a fazer uma lista completa de todos os FIIs negoci√°veis na Bovespa, e quem escolhe as informa√ß√µes da embalagem √© voc√™!</p>
<div id="introdu√ß√£o" class="section level2">
<h2>Introdu√ß√£o</h2>
<p>Eu lembro que ap√≥s terminada a leitura do livro do Marcelo Fayh sobre FIIs eu pensei: <em>certo, agora como vou ach√°-los?</em> A principal vantagem de quando elaborei a tabela pela primeira vez foi ter em m√£os a lista de todos os FIIs negoci√°veis, porque eu pensava: procurando no YouTube ou em sites especializados eu sei da exist√™ncia FII A, B, C - mas ser√£o todos? Eu quero saber de todos!</p>
<p>E se existir um FII que estivesse fazendo uma diferen√ßa para voc√™, mas voc√™ n√£o est√° vendo-o?</p>
<p>Mas com o motor do <code>R</code> para nos auxiliar, n√£o nos contentaremos somente com a lista de todos os FIIs negoci√°veis. Vamos para os indicadores deles tamb√©m! Vamos montar nosso supermercado de FIIs! Veja abaixo:</p>
<center>
<p><img src="/images/tabelafiiexformt.png" width="400" /></p>
<font size = "1">Aperte na imagem para aproximar</font>
</center>
<p>Voc√™ pode visualizar a tabela completa <a href="https://github.com/Kinzel/Kinzel.github.io/raw/master/content/files/tabela_fiis.xlsx">aqui</a>.</p>
<p><strong>Embalagem dos FIIs</strong></p>
<p>No nosso supermercado de FIIs somos n√≥s que escolhemos as embalagens! Escolheremos os indicadores abaixo:</p>
<p><font size = "2"></p>
<ol style="list-style-type: decimal">
<li>Ticker</li>
<li>Nome</li>
<li>Setor</li>
<li>Administrador</li>
<li>Cota√ß√£o</li>
<li>MM200Delta[^1]</li>
<li>Volume m√©dio di√°rio (em milh√µes)</li>
<li><em>Dividend Yield</em></li>
<li>P/VP</li>
<li>Valor em caixa</li>
<li>Payback (anos)</li>
</ol>
<p></font></p>
<p><em>MM200Delta:</em> medir o quanto a cota est√° ‚Äúespichada‚Äù para cima ou para baixo. √â usado m√©dia m√≥vel de 200 per√≠odos. Quanto maior o indicador, mais a cota subiu recentemente. Usaremos metodologia an√°loga ao JdK RS-Momentum usado no <a href="https://www.relativerotationgraphs.com/">Relative Rotation Graphs (RRG)</a>. Quanto menor, melhor.</p>
<p><em>Payback (anos):</em> payback em anos de quanto voc√™ recuperaria o valor do valor da cota com os rendimentos do FII adquirido. Medida simplista, n√£o √© medido com reinvestimento e √© dado como premissa que o <em>dividend yield</em> √© constante durante o per√≠odo. Quanto menor, melhor.</p>
</div>
<div id="kair√≥s" class="section level2">
<h2>Kair√≥s</h2>
<p><em>Kair√≥s foi na mitologia grega o deus do tempo oportuno, hoje tamb√©m referido como ‚Äúmedida certa‚Äù.</em></p>
<p>N√≥s iniciaremos nosso caminho pela programa√ß√£o <code>R</code>, mas se voc√™ n√£o √© usu√°rio da linguagem e somente quer usar o conte√∫do demonstrado no artigo para gerar as suas tabelas periodicamente, veja abaixo:</p>
<ul>
<li>Veja este v√≠deo <a href="">aqui</a> para instalar o R + RStudio + MT5 + mt5R. (7min) ##TODO</li>
<li>Veja este v√≠deo <a href="">aqui</a> de X minutos para rodar o c√≥digo sem saber de <code>R</code>. (4min) ##TODO</li>
</ul>
<p>Pronto! Espero que eu tenha ajudado as suas decis√µes de investimento! ‚ù§Ô∏è</p>
<p>Mas se voc√™ quer programar as suas pr√≥prias <em>embalagens</em>, continue lendo! ‚õè</p>
</div>
<div id="as-ferramentas" class="section level2">
<h2>As ferramentas</h2>
<ul>
<li>R + RStudio</li>
<li>MT5</li>
<li>mt5R (0.1.5 ou superior)</li>
</ul>
<p>Faremos uso de t√©cnicas de <a href="https://en.wikipedia.org/wiki/Web_scraping">web scrapping</a> nos seguintes sites:</p>
<ul>
<li><a href="https://www.statusinvest.com.br/" class="uri">https://www.statusinvest.com.br/</a></li>
<li><a href="https://www.clubefii.com.br/" class="uri">https://www.clubefii.com.br/</a></li>
</ul>
<p>Dois excelentes sites que eu recomendo muito!</p>
<p>Voc√™ pode acessar o c√≥digo <code>R</code> completo que ser√° usado <a href="https://raw.githubusercontent.com/Kinzel/Kinzel.github.io/master/content/files/SupermercadoFIIs.R">aqui</a>.</p>
</div>
<div id="o-come√ßo" class="section level2">
<h2>O come√ßo</h2>
<p>O nosso <em>pipeline</em> est√° resumidamente abaixo. A ferramenta e a informa√ß√£o que iremos obter.</p>
<ol style="list-style-type: decimal">
<li>mt5R: <em>ticker</em></li>
<li>Web scraping: verificar quem √© FII pelo <em>statusinvest</em></li>
<li>Web scraping: setor, administrador, DY12m, P/VP e valor em caixa pelo <em>statusinvest</em></li>
<li>mt5R: cota√ß√£o, MM200Delta e Volume</li>
<li>Web scrapping: nome do FII pelo <em>clubefii</em></li>
</ol>
<p>Vamos come√ßar! Carregaremos os pacotes que ser√£o usados.</p>
<pre class="r"><code>library(mt5R)
library(stringr) 
library(dplyr)</code></pre>
<p>Verificamos se o mt5R est√° no MT5:</p>
<pre class="r"><code>MT5.Ping()
#&gt; [1] TRUE</code></pre>
<div id="mt5r-ticker" class="section level3">
<h3>1. mt5R: ticker</h3>
<p>Aqui iremos somente extrair os <em>tickers</em> candidatos (possivelmente FIIs) do MetaTrader 5, usando <code>MT5.AllSymbols()</code>.</p>
<pre class="r"><code>## Pegaremos o Ticker de todos os ativos negociaveis na B3
sTodosTickers = MT5.AllSymbols() 

## Queremos somente aqueles que possuam &#39;11&#39; no nome 
sTodosTickers = sTodosTickers[str_detect(sTodosTickers, &quot;11&quot;)] 

## Podem vir op√ß√µes junto, tiramos pelo tamanho do nome
sTodosTickers = sTodosTickers[str_length(sTodosTickers) &gt;= 5 &amp; str_length(sTodosTickers) &lt;= 6] </code></pre>
<p>Vamos dar uma espiada nos <em>tickers</em> candidatos que provavelmente s√£o FIIs.</p>
</div>
</div>
